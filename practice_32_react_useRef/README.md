# README

## Практическое занятие №32

Репозитарий содержит материалы по практическому занятию №32, посвященному знакомству с хуком `useRef`.

### Цели занятия
- повторение и закрепление знаний;
- решение задач.

### Зачем это нужно
Сегодня мы будем говорить о хуке `useRef`. Он нужен нам в тех случаях, когда нужно получить прямой доступ к DOM-элементам. То есть, не к React-компонентам/элементам, а именно к реальному DOM. То есть в тех случаях, когда нам нужен императивный подход. Есть несколько случаев, когда имеет смысл использовать этот хук:
 - прямой доступ к DOM-элементам. Он нужен, если мы хотим, например, сделать какую-то анимацию. Или управлять фокусом. Или скроллом. Или какими-то API браузера, которые не предоставляются React - к примеру, IntersectionObserver, ResizeObserver, ...
 - хранение какого-то значения так, чтобы оно переживало ререндер, и его изменение не перерисовывало бы компонент.

### Императивная работа с DOM
Рассмотрим первый кейс использования, когда мы хотим получить прямой доступ к DOM-элементу. В этом случае, использование состоит из двух шагов: создать реф, и указать, к какому DOM-элементу мы хотим его применить. Важный момент - **рефы можно применять ТОЛЬКО к DOM-элементам.** Имеется в виду, что не получится создать реф на свой компонент.

```
import { useRef } from 'react';

export default function Button( {text, clickHandler} ) {

  // создаем реф. Аргументом будет начальное значение.
  const btnRef = useRef(null);

  // это понадобится чуть позже
  const btnClickHandler = (e) => {
    clickHandler(e);
  }

  return (
    /* указыываем, к какому DOM-элементу мы прикрепляем реф */
    <button onClick={btnClickHandler} ref={btnRef}>{text}</button>
  );
}
```

Все, теперь в рефе у нас хранится прямая ссылка на DOM-элемент.

Если мы выведем в консоль `btnRef`, мы увидим, что это обычный JS-объект, у которого есть свойство `current`. Это свойство содержит ссылку на DOM-элемент. И теперь мы можем работать с этой ссылкой как с обычным DOM-элементом. Например, вывести в консоль реальный размер нашей кнопки.

```
const btnClickHandler = (e) => {
  console.log('Real sizes:', btnRef.current.offsetWidth, btnRef.current.offsetHeight);
  clickHandler(e);
}
```

И это - единственный вариант получить фактические размеры нашего элемента.

### Хранение данных между рендерами
Еще один вариант использования рефов - это использование их как хранилища данных. Очень похоже на стейт, но есть 2 существенных отличия:
 - значение свойства `current` у рефа является мутабельным, то есть его можно изменять напрямую
 - изменение этого свойства НЕ заставляет компонент перерисоваться.

При этом, значение в рефе переживет ререндер.

Пример использования - сделаем счетчик кликов на кнопке, изменение которого не приводжит к ререндеру.
```
import { useRef } from 'react';

export default function Button( {text, clickHandler} ) {

  // создаем реф. Аргументом будет начальное значение.
  const btnRef = useRef(null);
  const counterRef = useRef(0);

  // это понадобится чуть позже
  const btnClickHandler = (e) => {
    clickHandler(e);
    counterRef.current += 1;
    console.log('Now clicks count is:', counterRef.current);
  }

  console.log('Button component rendered');

  return (
    { /* указыываем, к какому DOM-элементу мы прикрепляем реф */ }
    <button onClick={btnClickHandler} ref={btnRef}>{text}</button>
  );
}
```

Мы видим, что при нажатии на кнопку, в консоли отображается изменяющийся счетчик. При этом сам компонент не перерисовывается. То есть, мы храним некое значение, меняем его, и его изменение не провоцирует ререндер.

**Закрепим практикой**
1. В компоненте `App`, есть два инпута. Сделайте так, чтобы при монтировании компонента, фокус устанавливался бы на второй инпут.
2. Еще работа с DOM. В компоненте `App`, добавьте реф на контейнер инпутов. При первом рендере компонента, выводите в консоль его фактические размеры (offsetWidth, offsetHeight)
3. Закрепление императивной работы с DOM. Добавьте в компонент `App.js` кнопку. При нажатии на кнопку, выводить в консоль значение инпутов из п.1. Сделать это БЕЗ использования `useState`, через рефы.
4. Реализовать подсчет кликов на кнопке в компоненте `App`, при этом при изменении счетчика НЕ ПЕРЕРИСОВЫВАТЬ компонент.
5. При нажатии на кнопку, менять цвет фона контейнера на один из: красный, зеленый, синий (FF0000, 00FF00, 0000FF). Реализовать без использования стейта.

### Полезные ссылки
[Использование рефов](https://react.dev/learn/referencing-values-with-refs#) - работа с рефами как с хранилищем.
[Императивная работа с DOM](https://react.dev/learn/manipulating-the-dom-with-refs) - работа с DOM напрямую.
[Хук useRef](https://react.dev/reference/react/useRef) - информативно, с интерактивными примерами.
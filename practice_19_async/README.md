## Практическое занятие №19

### Тема: Работа с асинхронными операциями в JS.

Репозитарий содержит материалы по практическому занятию №19, посвященному работе с Promise API.

### Цели занятия
- закрепление знаний, полученных на лекциях;
- практическое применение знаний, полученных на лекциях.

### Разогрев
1. Что выведет код?
```
console.log('First');
const myPromise = new Promise( (resolve, reject) => {
  resolve('Result');
}).then( result => {
  console.log(result);
});
console.log('Third');
```

2. Что выведет код?
```
console.log('First');
const myPromise = new Promise( (resolve, reject) => {
  console.log('Second');
  resolve('Result');
}).then( result => {
  console.log(result);
});
console.log('Third');
```

3. Что выведет код?
```
console.log('First');
const myPromise = new Promise( (resolve, reject) => {
  console.log('Second');
  reject('Result');
}).then( result => {
  console.log(result);
});
console.log('Third');
```

4. Что выведет код?
```
console.log('First');
const myPromise = new Promise( (resolve, reject) => {
  console.log('Second');
  reject('Result');
}).then( null, result => {
  console.log(result);
  throw new Error('WOW!');
})
.finally( () => {
  console.log('Finally!');
})
.catch( err => console.log('From catch ' + err) );
console.log('Third');
```

### Задачи занятия (на отложенное выполнение)
1. Работаем с отложенным выполнением кода. Нужно вывести в консоль сообщение "Delayed message", через 2 секунды после запуска скрипта.
2. Делаем блок на странице, который будет запускать отложенное выполнение. Нужно написать функцию `renderDelayedBlock`. Она должна будет сделать инпут, в который будем вводить задержку в секундах, и кнопку "Запуск". При нажатии на кнопку "Запуск", нужно через N секунд вывести сообщение "Delayed message". N - это кол-во секунд, введенное в инпуте.
3. Дорабатываем наш блок. Добавляем кнопку "Отмена". Изначально она должна быть скрыта (рекомендуется воспользоваться CSS).
 - когда мы нажимаем на кнопку "Запуск", мы показываем кнопку "Отмена".
 - при нажатии на кнопку "Отмена", нам нужно отменить запланированное в `setTimeout` выполнение.
 - если выполнение все же произошло (т.е. функциональность внутри `setTimeout` выполнилась), то кнопку "Отмена" скрываем.
4. Работаем с другой асинхронной операцией. Наша задача - каждые 5 секунд выводить в консоль сообщение "Прошло 5 секунд".
5. Добавляем на страницу текущие дату и время. Нужно добавить в разметку блок, в котором должны отображаться текущие дата и время, вида `01.01.2000 11:23:55`. И нужно сделать так, чтобы дата и время отображались актуальные (т.е. обновлять текст ежесекундно).
6. Реализуем простой секундомер. Нужно добавить в блок с id=`simpleTimerContainer` секундомер. В блоке будут:
 - параграф, в котором будем выводить текущее время секундомера
 - кнопка "Старт" - при нажатии запускаем секундомер
 - кнопка "Сброс" - при нажатии сбрасываем секундомер.
7. Усложняем наш секундомер. Нам нужно добавить кнопки "Пауза", "Возобновить". Первая будет приостанавливать, но не сбрасывать секундомер, а вторая - возобновлять его работу.

### На промисы
8. Пишем первый промис. Он должен быть успешно завершен числом 345.
9. Пишем промис, который должен быть завершен неуспехом, текстом `Error`.
10. Немного усложним. Напишем промис, который будет случайным образом завершаться успешно или неуспешно. В промисе, нужно взять случайное значение (используем `Math.random`). Если это значение больше либо равно 0.5 - завершаем промис успехом, текстом `Success`. Если меньше 0.5 - то завершаем ошибкой, с текстом `Error`.
11. Написать промис, который через 2 секунды будет успешно завершен текстом "Successfully finished!". Этот текст нужно вывести в консоль.
12. Теперь задача через 2 секунды завершить промис "неуспехом", с текстом "Something went wrong!", и вывести результат в консоль.
13. Задача, завершить промис неуспехом, и обработать эту ситуацию, двумя способами.
14. Обеспечить вывод в консоль текста "Will appear in all cases" после завершения/отвержения промиса (т.е. в любом случае).
15. В скрипте есть функция `asyncFunction`. Изначально задумывалось, что она вернет строку через одну секунду после вызова. Но что-то пошло не так.. Перепишите функцию, чтобы она возвращала значение через одну секунду после вызова, и чтобы этим результатом можно было бы воспользоваться. Задача к обсуждению.

### Полезные ссылки
 - [setTimeout, setInterval](https://learn.javascript.ru/settimeout-setinterval) - русскоязычный гайд по таймаутам и интервалам. Настоятельно рекомендуется к прочтению.
 - [Раздел про промисы](https://learn.javascript.ru/async) - это раздел учебника, посвященный промисам. Также настоятельно рекомендуется к прочтению - по этой теме стопроцентно будут вопросы на собеседованиях.
